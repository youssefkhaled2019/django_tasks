<!DOCTYPE html>
{% load static %}
{% load crispy_forms_tags %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- bootstrab -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

</head>
<body>
    <div class="container ">
        <div class="row">
            <div class="col m-3">
                

              <form method="GET" action="{% url 'search' %}">
                <input type="text"   name="name_search">
                <input type="submit" value="search">
              </form>

                <!-- Button trigger modal -->
                <button type="button" value='add' class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                 add
                </button>
                <!-- Modal -->
                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <form action="{% url 'add_row' %}"  enctype="multipart/form-data" method="post" >
                          {% csrf_token %}
                          <div class="row">
                            <div class="form-group">
                            
                              <div class="container">
                                {{form|crispy}}
                                <button type="submit" class="btn btn-primary">Save changes</button>

                              </div>




                            </div>

                          </div>
                        </form>
                      </div>
                      <!-- <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                      </div> -->
                    </div>
                  </div>
                </div>

            </div>

        </div>
        <div class="row m-3">
            <div class=" card col ">
                <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">image</th>
                        <th scope="col">name</th>
                        <th scope="col">price</th>
                        <th scope="col">download file</th>
                        <th scope="col">date</th>
                        <th scope="col">number of update</th>
                        <th scope="col">open</th>
                        <th scope="col">update</th>
                        <th scope="col">delete</th>
                        
                      </tr>
                    </thead>
                    <tbody>
                        
              

                      {% for g in game %}
                      <tr>
                         <th scope="row">{{forloop.counter}}</th> 
                      
                         <td><img src="{{g.img.url}}"  alt="SS" height="50" width="50" /></td> 
                        <td>{{g.name}}</td>
                         <td>{{g.price}}</td>
                        <td>
                          {% if g.info %}
                          <a href="{{ g.info.url }}" download="{{ g.info.url }}">download</a>
                          {% else  %}
                          ---
                          {%endif %}
                        </td> <!-- media/{{g.info}} -->
                        <td >{{g.date|default:'---'}}</td>
                        <td >{{g.update}}</td>
                        <th scope="col"><a href="{%url 'show_item' g.id %}">open</a></th>

                        <th scope="col"><a href="#">update</a></th>
                        <th scope="col"><a href="{% url 'delete_row' g.id %}">delete</a></th>
                      </tr> 
                      {% endfor %}
                      
                    </tbody>
                  </table>
            </div>

        </div>
    </div>
   

<!-- bootstrab -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


</body>
</html>